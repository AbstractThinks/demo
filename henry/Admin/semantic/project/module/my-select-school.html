<dom-module id="my-select-school">
<style media="screen">

</style>
  <template>
      <label>学校</label>
      <select class="ui selection dropdown">
              <option value="" >学校</option>
              <template is="dom-repeat" items="[[schoolInfo]]">
                     <option value=[[item.id]]>[[item.name]]</option>
              </template>
      </select>
  </template>
  <script type="text/javascript">
          Polymer({
                  is : "my-select-school",
                  ready: function () {
                                //     this.schoolInfo = [
                                //     {
                                //       "adminId": 0,
                                //       "branch": false,
                                //       "code": "1",
                                //       "createdTime": 1480348800000,
                                //       "createdUserId": 0,
                                //       "deleted": false,
                                //       "id": 1,
                                //       "logoId": 0,
                                //       "name": "人民小学",
                                //       "parentSchoolId": 0,
                                //       "sortNumber": 0,
                                //       "updatedUserId": 0
                                //     },
                                //     {
                                //       "adminId": 0,
                                //       "branch": false,
                                //       "code": "2",
                                //       "createdTime": 1480348800000,
                                //       "createdUserId": 0,
                                //       "deleted": false,
                                //       "id": 2,
                                //       "logoId": 0,
                                //       "name": "育才小学",
                                //       "parentSchoolId": 0,
                                //       "sortNumber": 0,
                                //       "updatedUserId": 0
                                //     },
                                //     {
                                //       "adminId": 0,
                                //       "branch": false,
                                //       "code": "3",
                                //       "createdTime": 1480348800000,
                                //       "createdUserId": 0,
                                //       "deleted": false,
                                //       "id": 3,
                                //       "logoId": 0,
                                //       "name": "树人小学",
                                //       "parentSchoolId": 0,
                                //       "sortNumber": 0,
                                //       "updatedUserId": 0
                                //     }
                                //   ]

                  },
                  attached: function () {
                      var that = this;

                      $.ajax({
                              url:'http://k12.iyunbei.com/api/schools?page=1',
                              type: 'get',
                              xhrFields: {
                                      withCredentials: true
                              },
                            //   crossDomain: true,
                              success: function (data) {
                                  if (data.error) {

                                  } else {
                                    //  console.log(data)
                                     that.schoolInfo = data;
                                  }
                              },
                              error: function (e) {
                                  console.log(e)
                              }
                      });
                  }
          });
  </script>
</dom-module>
