<dom-module id="common-class">
<style media="screen">
    .common-class, 
    .my-class {
        display: block;
    }
    .common-class {
      margin-top: 8px;
    }
    .ui.divided.items.my-class > .item {
        padding: 1em 0!important;
    }
    i.search {
      display: inline-block;
    }
</style>
  <template >
      <div class="item">
          <!-- <div class="middle aligned content subject">
              学科：
              <a class="ui basic button primary" type=0 on-click="clickHandler">全部</a>
              <a class="ui basic button" type=1 on-click="clickHandler">语文</a>
              <a class="ui basic button" type=2 on-click="clickHandler">数学</a>
              <a class="ui basic button" type=3 on-click="clickHandler">英语</a>
              <a class="ui basic button" type=4 on-click="clickHandler">物理</a>
              <a class="ui basic button" type=5 on-click="clickHandler">化学</a>
              <a class="ui basic button" type=6 on-click="clickHandler">政治</a>
              <a class="ui basic button" type=7 on-click="clickHandler">生物</a>
              <a class="ui basic button" type=8 on-click="clickHandler">体育</a>
              <a class="ui basic button" type=9 on-click="clickHandler">历史</a>
          </div> -->
          <search-list-module class="subject" label="学科" url="http://k12.iyunbei.com/api/subjects?page=1
" className="subject" blankShow="true"></search-list-module>
      </div>
      <div class="item">
          <!-- <div class="middle aligned content grade">
              年级：
              <a class="ui basic button primary" type=0 on-click="clickHandler">全部</a>
              <a class="ui basic button" type=1 on-click="clickHandler">高一</a>
              <a class="ui basic button" type=2 on-click="clickHandler">高二</a>
              <a class="ui basic button" type=3 on-click="clickHandler">高三</a>
          </div> -->
          <search-list-module class="grade" label="年级" url="http://k12.iyunbei.com/api/dynamicenum/1028
" className="grade" blankShow="true"></search-list-module>
      </div>
      <div class="item">
          <div class="middle aligned content class">
              <!-- 分类： -->
              <search-list-module class="class" label="分类" url="http://k12.iyunbei.com/api/resources/listAllResourceTypes}
" className="class" ></search-list-module>
              <!-- <a class="ui basic button" type=1 on-click="clickHandler">试卷</a>
              <a class="ui basic button" type=2 on-click="clickHandler">课件</a>
              <a class="ui basic button" type=3 on-click="clickHandler">视频</a>
              <a class="ui basic button" type=4 on-click="clickHandler">资料</a> -->
          </div>
      </div>
      <div class="item">
        作者：
        <div class="ui input">
          <input type="text" id="author_input">
        </div>
        &nbsp;&nbsp;&nbsp;
         文件类型：
           
          <div class="ui selection dropdown file_input">
            <input type="hidden" name="file_input">
            <i class="dropdown icon"></i>
            <div class="default text">文件类型</div>
            <div class="menu">
              <div class="item" data-value="">所有类型</div>
              <div class="item" data-value="doc">doc</div>
              <div class="item" data-value="ppt">ppt</div>
              <div class="item" data-value="pdf">pdf</div>
            </div>
          </div>
        &nbsp;&nbsp;&nbsp;
        开始时间：
        <div class="ui input">
          <input type="date" id="time_start_input"/>
        </div>
         &nbsp;&nbsp;&nbsp;
         结束时间：
         <div class="ui input">
          <input type="date" id="time_end_input"/>
        </div>
         &nbsp;&nbsp;&nbsp;
       <button class="ui button" on-click="clickHandler"> <i class="icon search"></i>搜索</button>
      </div>

  </template>
  <script type="text/javascript">
          Polymer({
                is : "common-class",
                clickHandler: function(e) {

                    var dom = $(e.target);
                    

                    // if (dom.parent().hasClass('subject')) {
                    //     $('.subject a.button').removeClass('primary');
                    //     dom.addClass('primary');
                    // }
                    // if (dom.parent().hasClass('grade')) {
                    //     $('.grade a.button').removeClass('primary');
                    //     dom.addClass('primary');
                    // }
                    if (dom.parent().hasClass('class')) {
                        $('.class a.button').removeClass('primary');
                        dom.addClass('primary');                
                    }

                    var url = "http://k12.iyunbei.com/api/resources/queryByCondition?userName="+$("#author_input").val()+"&subjectId="+$('.subject a.button.primary').attr('type')+"&gradeId="+$('.grade a.button.primary').attr('type')+"&resourceTypeSuffix="+$(".file_input [name='file_input']").val()+"&resourceTypeId="+$('.class a.button.primary').attr('type')+"&startTime="+this._date($("#time_start_input").val())+"&endTime="+this._date($("#time_end_input").val())+"&page=1&pageSize=20";
                    
                    $('common-card').get(0).setAttribute("urlreq", url);
                },
                created: function () {
                    console.log("common-class created")
                },
                ready: function () {
                    console.log("common-class ready")
                    $(document).ready(function () {
                      $('.ui.dropdown').dropdown();
                    })
                },
                _date: function (e) {
                  var resultData = ""
                  if (e) {
                    resultData = e + " 00:00:00";
                  }
                  return resultData
                }


          });
  </script>
</dom-module>
