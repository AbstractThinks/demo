<dom-module id="common-pagination">
    <style media="screen">
   
    </style>
  <template>
      <div class="ui pagination menu" style="margin-top:24px;">
            <template is="dom-if" if="[[!data.hasPrevious]]">
              <a class="item disabled">
                <i class="angle left icon"></i>
              </a>
            </template>
            <template is="dom-if" if="[[data.hasPrevious]]">
              <a class="item" on-click="handlePrevPage">
                <i class="angle left icon"></i>
              </a>
            </template>
            <a class="item">
              {{data.pageNumber}}/{{data.totalPage}}
            </a>
            <template is="dom-if" if="[[data.hasNext]]">
                <a class="item" on-click="handleNextPage">
                  <i class="angle right icon"></i>
                </a>
            </template>
            <template is="dom-if" if="[[!data.hasNext]]">
                <a class="item disabled">
                  <i class="angle right icon"></i>
                </a>
            </template>
      </div>
  </template>
  <script type="text/javascript">
          Polymer({
                  is : "common-pagination",
                  attributeChanged: function(attrName, oldVal, newVal) {
                    console.log(attrName)
                    console.log(oldVal)
                    console.log(newVal)
                    // this.data =
                    this.data = JSON.parse(newVal) 

                  },
                  handleNextPage: function () {
                    
                      var urlreq = "http://k12.iyunbei.com/api/resources/queryByCondition?userName="+$("#author_input").val()+"&subjectId="+$('.subject a.button.primary').attr('type')+"&gradeId="+$('.grade a.button.primary').attr('type')+"&resourceTypeSuffix="+$(".file_input [name='file_input']").val()+"&resourceTypeId="+$('.class a.button.primary').attr('type')+"&page="+(this.data.pageNumber+1)+"&pageSize=20";
                      $('common-card').get(0).setAttribute("urlreq", urlreq);
                  },
                  handlePrevPage: function () {
                    var urlreq = "http://k12.iyunbei.com/api/resources/queryByCondition?userName="+$("#author_input").val()+"&subjectId="+$('.subject a.button.primary').attr('type')+"&gradeId="+$('.grade a.button.primary').attr('type')+"&resourceTypeSuffix="+$(".file_input [name='file_input']").val()+"&resourceTypeId="+$('.class a.button.primary').attr('type')+"&page="+(this.data.pageNumber-1)+"&pageSize=20";
                    $('common-card').get(0).setAttribute("urlreq", urlreq);
                  },
                  ready: function () {
                    this.data = {}
                  }
          });
  </script>
</dom-module>
